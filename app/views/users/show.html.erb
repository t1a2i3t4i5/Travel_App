<script>

  $(function()
  {        
    var kens = [ 'hoge', '北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県', '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県' ]; 
    var kencode = 1;
    var areas =[];
    
    <% (1..47).each do |count| %>
         areas.push(
          {
            code : kencode,
            name: kens[kencode], 
            color:
                  <% if @user.user_ken.find_by(ken_id: count) %>
                    "pink", 
                  <% else %>
                    "white",
                  <% end %>
            hoverColor: "#b3b2ee", 
            prefectures: [kencode]
            });
         kencode++;
   <% end %>

    $("#map-container").japanMap
    ({
        width: 1000,
        selection: "area",
        areas: areas,
        backgroundColor : "white",
        borderLineColor: "black",
        borderLineWidth : 0.25,
        lineColor : "#a0a0a0",
        lineWidth: 1,
        drawsBoxLine: false,
        showsPrefectureName: false,
        prefectureNameType: "short",
        movesIslands : true,
        fontSize : 11,
        fontShadowColor : "#fff",
        
      });
  });

</script>


<h1><%= image_tag @user.image.thumb50.url %><%= @user.name %>さんのページ</h1>
<%= render 'relationships/follow', user: @user %>


<%= @user.introduction %>

<br />

<%= link_to following_user_path, class:"uk-button uk-button-text" do %>
  フォロー<%= @user.followings.count %>
<% end %>

<%= link_to followers_user_path, class:"uk-button uk-button-text" do %>
  フォロワー<%= @user.followers.count %>
<% end %>

<br />

<%= visited_ken_count(@user) %>/47








<div class="uk-grid">
  <div class="map-container uk-width-1-2">
    <div id="map-container"></div>
  </div>
    <div class="post uk-width-1-2">
      <ul class="uk-child-width-expand" uk-tab="animation: uk-animation-fade">
        <li><a href="#">投稿</a></li>
        <li><a href="#">いいね</a></li>
      </ul>
      
      <ul class="uk-switcher">
        
        <li class="uk-section-xsmall">
          <div class="uk-overflow-auto">
            <div class="uk-padding">
              <%= render 'posts/post' , object: @posts %>
            </div>
          </div>
        </li>
        
        <li class="uk-section-xsmall">
          <div class="uk-overflow-auto">
            <div class="uk-padding">
              <%= render 'posts/post' , object: @user_liked_posts %>
            </div>
          </div>
        </li>
        
      </ul>
  </div>
</div>

